# 验收标准编写指南

## 目的

验收标准定义用户故事何时算"完成"，提供：
- 明确的测试目标
- 开发和产品之间的共识
- 范围边界

## 编写原则

### 应该

- 具体且可衡量
- 覆盖正常路径和错误情况
- 包含边缘情况
- 定义数据验证规则
- 指定性能要求（如相关）

### 不应该

- 使用模糊术语（"快速"、"用户友好"、"安全"）
- 留下隐含假设
- 包含实现细节
- 创建无法测试的标准

## 按类型分类的示例

### 功能性验收标准

```
Given 已登录的客户，购物车中有商品
When 点击"结账"
Then 跳转到支付页面
And 显示购物车总金额
```

### 验证性验收标准

```
Given 用户提交注册表单
When 邮箱字段为空
Then 显示错误消息"邮箱是必填项"
And 表单不提交
```

### 性能验收标准

```
Given 1000 个并发用户
When 加载控制面板
Then 页面在 2 秒内加载完成
```

### 安全验收标准

```
Given 未认证用户
When 访问 /admin 端点
Then 返回 401 Unauthorized
And 重定向到登录页面
```

### 兼容性验收标准

```
Given 用户使用 Chrome/Firefox/Safari 最新版
When 访问应用
Then 所有功能正常运行
And 布局显示正确
```

## 常见验收标准类别

| 类别 | 描述 | 示例关注点 |
|------|------|-----------|
| 正常路径 | 成功完成的流程 | 操作成功、数据保存 |
| 输入验证 | 输入检查 | 必填字段、格式验证 |
| 错误处理 | 失败场景 | 错误消息、恢复操作 |
| 边缘情况 | 边界条件 | 空列表、最大值、特殊字符 |
| 权限控制 | 授权规则 | 角色权限、访问控制 |
| 性能要求 | 速度/负载 | 响应时间、并发量 |
| 兼容性 | 浏览器/设备 | 多平台支持 |

## 验收标准模板

### 基础模板

```markdown
### Acceptance Criteria

**正常流程**
- [ ] Given [上下文], when [操作], then [结果]

**验证规则**
- [ ] Given [无效输入], when [提交], then [错误提示]

**边缘情况**
- [ ] Given [边界条件], when [操作], then [处理方式]
```

### 完整模板

```markdown
### Acceptance Criteria

**正常流程**
- [ ] 用户可以成功 [操作]
- [ ] 系统正确 [处理/保存/显示] 数据

**输入验证**
- [ ] [字段] 为必填项，空值提示错误
- [ ] [字段] 格式验证，无效格式提示错误

**错误处理**
- [ ] 操作失败时显示友好错误消息
- [ ] 用户可以从错误中恢复

**边缘情况**
- [ ] 处理空数据/列表情况
- [ ] 处理超出限制的情况

**非功能要求**
- [ ] 操作在 X 秒内完成
- [ ] 支持 [浏览器/设备] 列表
```

## 常见错误

| 错误 | 示例 | 改进 |
|------|------|------|
| 太模糊 | "系统应该快" | "页面加载时间 < 2秒" |
| 包含实现 | "使用 Redis 缓存" | "重复请求响应更快" |
| 无法测试 | "用户体验好" | "用户可在 3 步内完成操作" |
| 缺少边界 | "支持上传文件" | "支持上传最大 10MB 的 PDF/JPG" |
